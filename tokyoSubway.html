<!DOCTYPE HTML>
<html>
<head>
<title>tokyo subway</title>
<script src="./three.min.js"></script>
<style>
  canvas { width: 100%; height: 100%;background-color: #fff;}
</style>
</head>
<body>
3D tokyo subway
  <div id="div_canvas">
  <script>
  var subwayData = [
  {'name':'toei-shinjyuku', 'color':0x6cbb5a, 'data':[
    {'id':'S01','sta':'新宿駅','lat':35.690923,'lng':139.70026,'dep':-26.5},
    {'id':'S02','sta':'新宿三丁目駅','lat':35.690618,'lng':139.706271,'dep':-19.1},
    {'id':'S03','sta':'曙橋駅','lat':35.692406,'lng':139.722877,'dep':-17.4},
    {'id':'S04','sta':'市ヶ谷駅','lat':35.691012,'lng':139.735585,'dep':-17.5},
    {'id':'S05','sta':'九段下駅','lat':35.695589,'lng':139.751949,'dep':-19.2},
    {'id':'S06','sta':'神保町駅','lat':35.695498,'lng':139.758121,'dep':-9.2},
    {'id':'S07','sta':'小川町駅','lat':35.695232,'lng':139.767463,'dep':-22.1},
    {'id':'S08','sta':'岩本町駅','lat':35.695541,'lng':139.775872,'dep':-24.4},
    {'id':'S09','sta':'馬喰横山駅','lat':35.692121,'lng':139.782778,'dep':-17.3},
    {'id':'S10','sta':'浜町駅','lat':35.688514,'lng':139.788156,'dep':-19.9},
    {'id':'S11','sta':'森下駅','lat':35.68796,'lng':139.797045,'dep':-17.7},
    {'id':'S12','sta':'菊川駅','lat':35.688383,'lng':139.806014,'dep':-17.4},
    {'id':'S13','sta':'住吉駅','lat':35.689069,'lng':139.815651,'dep':-14.9},
    {'id':'S14','sta':'西大島駅','lat':35.689346,'lng':139.826211,'dep':-18.3},
    {'id':'S15','sta':'大島駅','lat':35.689912,'lng':139.83565,'dep':-14},
    {'id':'S16','sta':'東大島駅','lat':35.690344,'lng':139.845958,'dep':-10.1},
    {'id':'S17','sta':'船堀駅','lat':35.683745,'lng':139.864315,'dep':-6.9},
    {'id':'S18','sta':'一之江駅','lat':35.686052,'lng':139.882929,'dep':-18.7},
    {'id':'S19','sta':'瑞江駅','lat':35.693321,'lng':139.897612,'dep':-12.3},
    {'id':'S20','sta':'篠崎駅','lat':35.706016,'lng':139.903698,'dep':-13.2},
    {'id':'S21','sta':'本八幡駅','lat':35.720842,'lng':139.927441,'dep':-21}
  ]},
  {'name':'toei-ooedo', 'color':0xb6007a, 'data':[
    {'id':'E28','sta':'都庁前駅','lat':35.690553,'lng':139.692573,'dep':-18.8},
    {'id':'E01','sta':'新宿西口駅','lat':35.693315,'lng':139.699155,'dep':-21.9},
    {'id':'E02','sta':'東新宿駅','lat':35.697922,'lng':139.707545,'dep':-18.3},
    {'id':'E03','sta':'若松河田駅','lat':35.699218,'lng':139.718185,'dep':-19.4},
    {'id':'E04','sta':'牛込柳町駅','lat':35.699521,'lng':139.725025,'dep':-21.2},
    {'id':'E05','sta':'牛込神楽坂駅','lat':35.700852,'lng':139.735807,'dep':-20.7},
    {'id':'E06','sta':'飯田橋駅','lat':35.702065,'lng':139.745007,'dep':-32.1},
    {'id':'E07','sta':'春日駅','lat':35.709605,'lng':139.753253,'dep':-22.3},
    {'id':'E08','sta':'本郷三丁目駅','lat':35.706674,'lng':139.759912,'dep':-23.2},
    {'id':'E09','sta':'上野御徒町駅','lat':35.707887,'lng':139.774332,'dep':-15.5},
    {'id':'E10','sta':'新御徒町駅','lat':35.70705,'lng':139.781944,'dep':-15.5},
    {'id':'E11','sta':'蔵前駅','lat':35.705552,'lng':139.792314,'dep':-17.9},
    {'id':'E12','sta':'両国駅','lat':35.696885,'lng':139.797431,'dep':-15.2},
    {'id':'E13','sta':'森下駅','lat':35.687962,'lng':139.797048,'dep':-22.5},
    {'id':'E14','sta':'清澄白河駅','lat':35.682106,'lng':139.798858,'dep':-14.7},
    {'id':'E15','sta':'門前仲町駅','lat':35.671851,'lng':139.796211,'dep':-18.5},
    {'id':'E16','sta':'月島駅','lat':35.664869,'lng':139.784229,'dep':-15},
    {'id':'E17','sta':'勝どき駅','lat':35.65851,'lng':139.77644,'dep':-15.3},
    {'id':'E18','sta':'築地市場駅','lat':35.664902,'lng':139.766926,'dep':-15.7},
    {'id':'E19','sta':'汐留駅','lat':35.662792,'lng':139.759848,'dep':-17.8},
    {'id':'E20','sta':'大門駅','lat':35.656784,'lng':139.754661,'dep':-22.8},
    {'id':'E21','sta':'赤羽橋駅','lat':35.655006,'lng':139.743648,'dep':-21},
    {'id':'E22','sta':'麻布十番駅','lat':35.656494,'lng':139.736119,'dep':-32.5},
    {'id':'E23','sta':'六本木駅','lat':35.664011,'lng':139.731444,'dep':-42.3},
    {'id':'E24','sta':'青山一丁目駅','lat':35.672772,'lng':139.724159,'dep':-27},
    {'id':'E25','sta':'国立競技場駅','lat':35.680058,'lng':139.714127,'dep':-28.4},
    {'id':'E26','sta':'代々木駅','lat':35.683658,'lng':139.70158,'dep':-20.6},
    {'id':'E27','sta':'新宿駅','lat':35.688191,'lng':139.69915,'dep':-36.6},
    {'id':'E28','sta':'都庁前駅','lat':35.690553,'lng':139.692573,'dep':-18.8},
    {'id':'E29','sta':'西新宿五丁目駅','lat':35.689797,'lng':139.684309,'dep':-23.4},
    {'id':'E30','sta':'中野坂上駅','lat':35.697913,'lng':139.682912,'dep':-33.4},
    {'id':'E31','sta':'東中野駅','lat':35.706826,'lng':139.683032,'dep':-34.2},
    {'id':'E32','sta':'中井駅','lat':35.713978,'lng':139.686353,'dep':-35.5},
    {'id':'E33','sta':'落合南長崎駅','lat':35.723612,'lng':139.683303,'dep':-17.1},
    {'id':'E34','sta':'新江古田駅','lat':35.732537,'lng':139.670654,'dep':-12.6},
    {'id':'E35','sta':'練馬駅','lat':35.73746,'lng':139.655068,'dep':-15.6},
    {'id':'E36','sta':'豊島園駅','lat':35.742054,'lng':139.649113,'dep':-19.6},
    {'id':'E37','sta':'練馬春日町駅','lat':35.751456,'lng':139.640235,'dep':-18.7},
    {'id':'E38','sta':'光が丘駅','lat':35.758528,'lng':139.6286,'dep':-11.9}
  ]},
  {'name':'toei-mita', 'color':0x0079c2, 'data':[
    {'id':'I01','sta':'目黒駅','lat':35.634002,'lng':139.71583,'dep':-18.7},
    {'id':'I02','sta':'白金台駅','lat':35.637917,'lng':139.726133,'dep':-27.2},
    {'id':'I03','sta':'白金高輪駅','lat':35.642905,'lng':139.734104,'dep':-28.7},
    {'id':'I04','sta':'三田駅','lat':35.648184,'lng':139.748776,'dep':-23.9},
    {'id':'I05','sta':'芝公園駅','lat':35.654075,'lng':139.749827,'dep':-20.6},
    {'id':'I06','sta':'御成門駅','lat':35.661221,'lng':139.751533,'dep':-19.1},
    {'id':'I07','sta':'内幸町駅','lat':35.669746,'lng':139.75561,'dep':-21.3},
    {'id':'I08','sta':'日比谷駅','lat':35.675113,'lng':139.75977,'dep':-13.3},
    {'id':'I09','sta':'大手町駅','lat':35.684795,'lng':139.766092,'dep':-12.9},
    {'id':'I10','sta':'神保町駅','lat':35.695493,'lng':139.758121,'dep':-16},
    {'id':'I11','sta':'水道橋駅','lat':35.703529,'lng':139.755082,'dep':-16.7},
    {'id':'I12','sta':'春日駅','lat':35.709605,'lng':139.75325,'dep':-13.4},
    {'id':'I13','sta':'白山駅','lat':35.721411,'lng':139.752134,'dep':-17.8},
    {'id':'I14','sta':'千石駅','lat':35.727959,'lng':139.744801,'dep':-13.3},
    {'id':'I15','sta':'巣鴨駅','lat':35.733489,'lng':139.739348,'dep':-13.4},
    {'id':'I16','sta':'西巣鴨駅','lat':35.743502,'lng':139.728716,'dep':-13.9},
    {'id':'I17','sta':'新板橋駅','lat':35.748785,'lng':139.720106,'dep':-11.5},
    {'id':'I18','sta':'板橋区役所前駅','lat':35.75129,'lng':139.710107,'dep':-11},
    {'id':'I19','sta':'板橋本町駅','lat':35.761342,'lng':139.705533,'dep':-10.4},
    {'id':'I20','sta':'本蓮沼駅','lat':35.768788,'lng':139.702323,'dep':-10.6},
    {'id':'I21','sta':'志村坂上駅','lat':35.775728,'lng':139.695379,'dep':-11.5},
    {'id':'I22','sta':'志村三丁目駅','lat':35.777481,'lng':139.685897,'dep':-7.1},
    {'id':'I23','sta':'蓮根駅','lat':35.784175,'lng':139.679041,'dep':-7.8},
    {'id':'I24','sta':'西台駅','lat':35.786992,'lng':139.673966,'dep':-8.7},
    {'id':'I25','sta':'高島平駅','lat':35.788829,'lng':139.661167,'dep':-10.1},
    {'id':'I26','sta':'新高島平駅','lat':35.790293,'lng':139.654266,'dep':-8.8},
    {'id':'I27','sta':'西高島平駅','lat':35.791934,'lng':139.645892,'dep':-7.9}
  ]},
  {'name':'toei-asakusa', 'color':0xe85298, 'data':[
    {'id':'A01','sta':'西馬込','lat':35.586859,'lng':139.705941,'dep':-9},
    {'id':'A02','sta':'馬込駅','lat':35.596435,'lng':139.711772,'dep':-12.6},
    {'id':'A03','sta':'中延駅','lat':35.605387,'lng':139.71362,'dep':-11},
    {'id':'A04','sta':'戸越駅','lat':35.614637,'lng':139.716496,'dep':-11},
    {'id':'A05','sta':'五反田駅','lat':35.626446,'lng':139.723442,'dep':-12},
    {'id':'A06','sta':'高輪台駅','lat':35.631676,'lng':139.730304,'dep':-18.2},
    {'id':'A07','sta':'泉岳寺駅','lat':35.638696,'lng':139.740016,'dep':-11.4},
    {'id':'A08','sta':'三田駅','lat':35.648182,'lng':139.748776,'dep':-12.5},
    {'id':'A09','sta':'大門駅','lat':35.656786,'lng':139.754661,'dep':-7.9},
    {'id':'A10','sta':'新橋駅','lat':35.665495,'lng':139.759644,'dep':-13.8},
    {'id':'A11','sta':'東銀座駅','lat':35.669465,'lng':139.767259,'dep':-9.4},
    {'id':'A12','sta':'宝町駅','lat':35.675463,'lng':139.771765,'dep':-13.6},
    {'id':'A13','sta':'日本橋駅','lat':35.682411,'lng':139.773924,'dep':-12.9},
    {'id':'A14','sta':'人形町駅','lat':35.686307,'lng':139.782285,'dep':-15.6},
    {'id':'A15','sta':'東日本橋駅','lat':35.692123,'lng':139.784822,'dep':-8.6},
    {'id':'A16','sta':'浅草橋駅','lat':35.697552,'lng':139.785992,'dep':-11.6},
    {'id':'A17','sta':'蔵前駅','lat':35.703237,'lng':139.790935,'dep':-7.5},
    {'id':'A18','sta':'浅草駅','lat':35.708941,'lng':139.796568,'dep':-16.6},
    {'id':'A19','sta':'本所吾妻橋駅','lat':35.708579,'lng':139.804625,'dep':-9.6},
    {'id':'A20','sta':'押上駅','lat':35.710701,'lng':139.812937,'dep':-6.7}
  ]},
  {'name':'yurakucho', 'color':0xd7c447, 'data':[
    {'id':'Y01','sta':'和光市駅','lat':35.78855,'lng':139.612337,'dep':1.7},
    {'id':'Y02','sta':'地下鉄成増駅','lat':35.77653,'lng':139.63151,'dep':-16.1},
    {'id':'Y03','sta':'地下鉄赤塚駅','lat':35.769939,'lng':139.644025,'dep':-15.2},
    {'id':'Y04','sta':'平和台駅','lat':35.75786,'lng':139.653764,'dep':-17.7},
    {'id':'Y05','sta':'氷川台駅','lat':35.749545,'lng':139.665571,'dep':-17.7},
    {'id':'Y06','sta':'小竹向原駅','lat':35.743806,'lng':139.67858,'dep':-17.3},
    {'id':'Y07','sta':'千川駅','lat':35.738229,'lng':139.689274,'dep':-12.3},
    {'id':'Y08','sta':'要町駅','lat':35.73323,'lng':139.698718,'dep':-16.1},
    {'id':'Y09','sta':'池袋駅','lat':35.728943,'lng':139.710388,'dep':-12.2},
    {'id':'Y10','sta':'東池袋駅','lat':35.725729,'lng':139.719537,'dep':-13.8},
    {'id':'Y11','sta':'護国寺駅','lat':35.719046,'lng':139.727541,'dep':-16.7},
    {'id':'Y12','sta':'江戸川橋駅','lat':35.709503,'lng':139.733541,'dep':-16},
    {'id':'Y13','sta':'飯田橋駅','lat':35.70206,'lng':139.745005,'dep':-19.1},
    {'id':'Y14','sta':'市ヶ谷駅','lat':35.691043,'lng':139.735601,'dep':-8.9},
    {'id':'Y15','sta':'麹町駅','lat':35.684002,'lng':139.737615,'dep':-15.9},
    {'id':'Y16','sta':'永田町駅','lat':35.678764,'lng':139.740257,'dep':-23.7},
    {'id':'Y17','sta':'桜田門駅','lat':35.677403,'lng':139.751493,'dep':-17.1},
    {'id':'Y18','sta':'有楽町駅','lat':35.675069,'lng':139.763332,'dep':-19.4},
    {'id':'Y19','sta':'銀座一丁目駅','lat':35.674346,'lng':139.767047,'dep':-23},
    {'id':'Y20','sta':'新富町駅','lat':35.670458,'lng':139.773715,'dep':-21},
    {'id':'Y21','sta':'月島駅','lat':35.664869,'lng':139.784232,'dep':-22.5},
    {'id':'Y22','sta':'豊洲駅','lat':35.654908,'lng':139.796219,'dep':-19},
    {'id':'Y23','sta':'辰巳駅','lat':35.645584,'lng':139.810526,'dep':-23.9},
    {'id':'Y24','sta':'新木場駅','lat':35.646157,'lng':139.827426,'dep':7.8}
  ]},
  {'name':'chiyoda', 'color':0x009944, 'data':[
    {'id':'C01','sta':'代々木上原','lat':35.669066,'lng':139.67968,'dep':8.6},
    {'id':'C02','sta':'代々木公園駅','lat':35.669188,'lng':139.689097,'dep':-11},
    {'id':'C03','sta':'明治神宮前駅','lat':35.669075,'lng':139.703994,'dep':-17.4},
    {'id':'C04','sta':'表参道駅','lat':35.665244,'lng':139.712314,'dep':-18.8},
    {'id':'C05','sta':'乃木坂駅','lat':35.666571,'lng':139.726219,'dep':-19.3},
    {'id':'C06','sta':'赤坂駅','lat':35.672134,'lng':139.736212,'dep':-15},
    {'id':'C07','sta':'国会議事堂前駅','lat':35.673934,'lng':139.745219,'dep':-37.9},
    {'id':'C08','sta':'霞ケ関駅','lat':35.67384,'lng':139.7509,'dep':-8.2},
    {'id':'C09','sta':'日比谷駅','lat':35.675117,'lng':139.75977,'dep':-14.4},
    {'id':'C10','sta':'二重橋前駅','lat':35.681072,'lng':139.761951,'dep':-15.3},
    {'id':'C11','sta':'大手町駅','lat':35.684799,'lng':139.766087,'dep':-14.1},
    {'id':'C12','sta':'新御茶ノ水駅','lat':35.698072,'lng':139.766012,'dep':-24.3},
    {'id':'C13','sta':'湯島駅','lat':35.708242,'lng':139.76992,'dep':-12.4},
    {'id':'C14','sta':'根津駅','lat':35.7174,'lng':139.765655,'dep':-15.8},
    {'id':'C15','sta':'千駄木駅','lat':35.725546,'lng':139.763241,'dep':-15.4},
    {'id':'C16','sta':'西日暮里駅','lat':35.732137,'lng':139.766787,'dep':-15.3},
    {'id':'C17','sta':'町屋駅','lat':35.742798,'lng':139.781046,'dep':-16.3},
    {'id':'C18','sta':'北千住駅','lat':35.749673,'lng':139.80488,'dep':-11.3},
    {'id':'C19','sta':'綾瀬駅','lat':35.762213,'lng':139.824916,'dep':7.1},
    {'id':'C20','sta':'北綾瀬駅','lat':35.777057,'lng':139.832037,'dep':7}
  ]},
  {'name':'hanzomon', 'color':0x9b7cb6, 'data':[
    {'id':'Z01','sta':'渋谷駅','lat':35.658521,'lng':139.701336,'dep':-14.9},
    {'id':'Z02','sta':'表参道駅','lat':35.665253,'lng':139.712311,'dep':-8.5},
    {'id':'Z03','sta':'青山一丁目駅','lat':35.672768,'lng':139.724159,'dep':-14.6},
    {'id':'Z04','sta':'永田町駅','lat':35.678758,'lng':139.74026,'dep':-36},
    {'id':'Z05','sta':'半蔵門駅','lat':35.685701,'lng':139.741631,'dep':-18.3},
    {'id':'Z06','sta':'九段下駅','lat':35.695587,'lng':139.751949,'dep':-21.9},
    {'id':'Z07','sta':'神保町駅','lat':35.695495,'lng':139.758118,'dep':-22.1},
    {'id':'Z08','sta':'大手町駅','lat':35.684801,'lng':139.766084,'dep':-27.1},
    {'id':'Z09','sta':'三越前駅','lat':35.684886,'lng':139.77316,'dep':-27.8},
    {'id':'Z10','sta':'水天宮前駅','lat':35.68269,'lng':139.78538,'dep':-22},
    {'id':'Z11','sta':'清澄白河駅','lat':35.682102,'lng':139.798855,'dep':-21.5},
    {'id':'Z12','sta':'住吉駅','lat':35.689067,'lng':139.815651,'dep':-32.6},
    {'id':'Z13','sta':'錦糸町駅','lat':35.696436,'lng':139.813951,'dep':-21.8},
    {'id':'Z14','sta':'押上駅','lat':35.710701,'lng':139.81294,'dep':-21.6}
  ]},
  {'name':'namboku', 'color':0x00ada9, 'data':[
    {'id':'N01','sta':'目黒駅','lat':35.633998,'lng':139.71583,'dep':-19.8},
    {'id':'N02','sta':'白金台駅','lat':35.637917,'lng':139.726138,'dep':-28.3},
    {'id':'N03','sta':'白金高輪駅','lat':35.642907,'lng':139.734104,'dep':-29.8},
    {'id':'N04','sta':'麻布十番駅','lat':35.654681,'lng':139.737055,'dep':-24.3},
    {'id':'N05','sta':'六本木一丁目駅','lat':35.665599,'lng':139.738997,'dep':-22.3},
    {'id':'N06','sta':'溜池山王駅','lat':35.67362,'lng':139.741424,'dep':-16.2},
    {'id':'N07','sta':'永田町駅','lat':35.67876,'lng':139.740263,'dep':-26.7},
    {'id':'N08','sta':'四ツ谷駅','lat':35.68601,'lng':139.730671,'dep':-21.2},
    {'id':'N09','sta':'市ケ谷駅','lat':35.691006,'lng':139.735588,'dep':-20.5},
    {'id':'N10','sta':'飯田橋駅','lat':35.702071,'lng':139.745018,'dep':-20.3},
    {'id':'N11','sta':'後楽園駅','lat':35.70734,'lng':139.751198,'dep':-37.5},
    {'id':'N12','sta':'東大前駅','lat':35.717637,'lng':139.758024,'dep':-21.9},
    {'id':'N13','sta':'本駒込駅','lat':35.724148,'lng':139.753829,'dep':-19.4},
    {'id':'N14','sta':'駒込駅','lat':35.736487,'lng':139.746877,'dep':-16.9},
    {'id':'N15','sta':'西ケ原駅','lat':35.746007,'lng':139.742328,'dep':-14.1},
    {'id':'N16','sta':'王子駅','lat':35.752475,'lng':139.738141,'dep':-17.5},
    {'id':'N17','sta':'王子神谷駅','lat':35.765175,'lng':139.735928,'dep':-20.2},
    {'id':'N18','sta':'志茂駅','lat':35.777951,'lng':139.7326,'dep':-16.4},
    {'id':'N19','sta':'赤羽岩淵駅','lat':35.783424,'lng':139.722101,'dep':-18}
  ]},
  {'name':'marunouchi', 'color':0xe60012, 'data':[
    {'id':'M01','sta':'荻窪駅','lat':35.704631,'lng':139.619982,'dep':-10.7},
    {'id':'M02','sta':'南阿佐ケ谷駅','lat':35.699634,'lng':139.635761,'dep':-7.7},
    {'id':'M03','sta':'新高円寺駅','lat':35.697817,'lng':139.648169,'dep':-7},
    {'id':'M04','sta':'東高円寺駅','lat':35.697804,'lng':139.657828,'dep':-6.4},
    {'id':'M05','sta':'新中野駅','lat':35.697491,'lng':139.669034,'dep':-7.3},
    {'id':'M06','sta':'中野坂上駅','lat':35.697922,'lng':139.682909,'dep':-9.8},
    {'id':'M07','sta':'西新宿駅','lat':35.694302,'lng':139.692782,'dep':-10},
    {'id':'M08','sta':'新宿駅','lat':35.690923,'lng':139.700249,'dep':-11.2},
    {'id':'M09','sta':'新宿三丁目駅','lat':35.690618,'lng':139.706268,'dep':-11},
    {'id':'M10','sta':'新宿御苑前駅','lat':35.688585,'lng':139.710694,'dep':-7.6},
    {'id':'M11','sta':'四谷三丁目駅','lat':35.687956,'lng':139.720106,'dep':-7.5},
    {'id':'M12','sta':'四ツ谷駅','lat':35.686013,'lng':139.730668,'dep':5.5},
    {'id':'M13','sta':'赤坂見附駅','lat':35.677026,'lng':139.737044,'dep':-11.7},
    {'id':'M14','sta':'国会議事堂前駅','lat':35.673938,'lng':139.745217,'dep':-11.2},
    {'id':'M15','sta':'霞ケ関駅','lat':35.673831,'lng':139.750906,'dep':-11.3},
    {'id':'M16','sta':'銀座駅','lat':35.67199,'lng':139.763965,'dep':-10.3},
    {'id':'M17','sta':'東京駅','lat':35.681102,'lng':139.767087,'dep':-10.3},
    {'id':'M18','sta':'大手町駅','lat':35.684806,'lng':139.766087,'dep':-10.2},
    {'id':'M19','sta':'淡路町駅','lat':35.69543,'lng':139.767576,'dep':-8.1},
    {'id':'M20','sta':'御茶ノ水駅','lat':35.699856,'lng':139.763786,'dep':-7.6},
    {'id':'M21','sta':'本郷三丁目駅','lat':35.706671,'lng':139.759915,'dep':-6.3},
    {'id':'M22','sta':'後楽園駅','lat':35.707338,'lng':139.751203,'dep':3.5},
    {'id':'M23','sta':'茗荷谷駅','lat':35.717302,'lng':139.736736,'dep':-5.9},
    {'id':'M24','sta':'新大塚駅','lat':35.725694,'lng':139.729968,'dep':-6.8},
    {'id':'M25','sta':'池袋駅','lat':35.72893,'lng':139.710386,'dep':-8.7}
  ]},
  {'name':'hibiya', 'color':0x9caeb7, 'data':[
    {'id':'H01','sta':'中目黒駅','lat':35.644315,'lng':139.69916,'dep':5.2},
    {'id':'H02','sta':'恵比寿駅','lat':35.646689,'lng':139.710112,'dep':-11.2},
    {'id':'H03','sta':'広尾駅','lat':35.652277,'lng':139.722203,'dep':-10},
    {'id':'H04','sta':'六本木駅','lat':35.66284,'lng':139.731446,'dep':-11.8},
    {'id':'H05','sta':'神谷町駅','lat':35.662978,'lng':139.745077,'dep':-11.3},
    {'id':'H06','sta':'霞ケ関駅','lat':35.673836,'lng':139.750898,'dep':-16.4},
    {'id':'H07','sta':'日比谷駅','lat':35.675115,'lng':139.759768,'dep':-18.8},
    {'id':'H08','sta':'銀座駅','lat':35.671986,'lng':139.763968,'dep':-15.8},
    {'id':'H09','sta':'東銀座駅','lat':35.669463,'lng':139.767259,'dep':-15.3},
    {'id':'H10','sta':'築地駅','lat':35.668116,'lng':139.772607,'dep':-10.2},
    {'id':'H11','sta':'八丁堀駅','lat':35.674616,'lng':139.777704,'dep':-12.2},
    {'id':'H12','sta':'茅場町駅','lat':35.679756,'lng':139.780008,'dep':-8.5},
    {'id':'H13','sta':'人形町駅','lat':35.686313,'lng':139.782287,'dep':-10.4},
    {'id':'H14','sta':'小伝馬町駅','lat':35.690738,'lng':139.778436,'dep':-9.7},
    {'id':'H15','sta':'秋葉原駅','lat':35.698545,'lng':139.773093,'dep':-12.4},
    {'id':'H16','sta':'仲御徒町駅','lat':35.706647,'lng':139.776137,'dep':-9.6},
    {'id':'H17','sta':'上野駅','lat':35.713765,'lng':139.777256,'dep':-13.7},
    {'id':'H18','sta':'入谷駅','lat':35.72074,'lng':139.784543,'dep':-9.2},
    {'id':'H19','sta':'三ノ輪駅','lat':35.729629,'lng':139.79149,'dep':-10.8},
    {'id':'H20','sta':'南千住駅','lat':35.732337,'lng':139.798772,'dep':8},
    {'id':'H21','sta':'北千住駅','lat':35.749675,'lng':139.804882,'dep':14.4}
  ]},
  {'name':'ginza', 'color':0xf39700, 'data':[
    {'id':'G01','sta':'渋谷駅','lat':35.658523,'lng':139.701333,'dep':12.1},
    {'id':'G02','sta':'表参道駅','lat':35.665246,'lng':139.712317,'dep':-8.1},
    {'id':'G03','sta':'外苑前駅','lat':35.670532,'lng':139.717855,'dep':-9.5},
    {'id':'G04','sta':'青山一丁目駅','lat':35.672768,'lng':139.724164,'dep':-7.7},
    {'id':'G05','sta':'赤坂見附駅','lat':35.677021,'lng':139.737052,'dep':-6.9},
    {'id':'G06','sta':'溜池山王駅','lat':35.673631,'lng':139.741419,'dep':-9.4},
    {'id':'G07','sta':'虎ノ門駅','lat':35.670227,'lng':139.749833,'dep':-8.5},
    {'id':'G08','sta':'新橋駅','lat':35.66661,'lng':139.758121,'dep':-10},
    {'id':'G09','sta':'銀座駅','lat':35.671981,'lng':139.763971,'dep':-9.3},
    {'id':'G10','sta':'京橋駅','lat':35.676843,'lng':139.77011,'dep':-10.3},
    {'id':'G11','sta':'日本橋駅','lat':35.682418,'lng':139.773924,'dep':-10.5},
    {'id':'G12','sta':'三越前駅','lat':35.684891,'lng':139.773163,'dep':-9.8},
    {'id':'G13','sta':'神田駅','lat':35.691696,'lng':139.770888,'dep':-8},
    {'id':'G14','sta':'末広町駅','lat':35.702973,'lng':139.771717,'dep':-7.4},
    {'id':'G15','sta':'上野広小路駅','lat':35.707678,'lng':139.772881,'dep':-8},
    {'id':'G16','sta':'上野駅','lat':35.713774,'lng':139.77725,'dep':-10.1},
    {'id':'G17','sta':'稲荷町駅','lat':35.711295,'lng':139.782599,'dep':-6.8},
    {'id':'G18','sta':'田原町駅','lat':35.709901,'lng':139.790932,'dep':-7.7},
    {'id':'G19','sta':'浅草駅','lat':35.712068,'lng':139.798432,'dep':-8.8}
  ]},
  {'name':'tozai', 'color':0x00a7db, 'data':[
    {'id':'T01','sta':'中野駅','lat':35.706035,'lng':139.665654,'dep':0.7},
    {'id':'T02','sta':'落合駅','lat':35.710975,'lng':139.687286,'dep':-12.6},
    {'id':'T03','sta':'高田馬場駅','lat':35.712288,'lng':139.703787,'dep':-12.9},
    {'id':'T04','sta':'早稲田駅','lat':35.705724,'lng':139.721316,'dep':-10.8},
    {'id':'T05','sta':'神楽坂駅','lat':35.703794,'lng':139.734547,'dep':-17.5},
    {'id':'T06','sta':'飯田橋駅','lat':35.702071,'lng':139.745016,'dep':-10.8},
    {'id':'T07','sta':'九段下駅','lat':35.695591,'lng':139.751952,'dep':-11.4},
    {'id':'T08','sta':'竹橋駅','lat':35.690662,'lng':139.75682,'dep':-11.1},
    {'id':'T09','sta':'大手町駅','lat':35.684795,'lng':139.766082,'dep':-18.4},
    {'id':'T10','sta':'日本橋駅','lat':35.682407,'lng':139.773919,'dep':-19.1},
    {'id':'T11','sta':'茅場町駅','lat':35.679753,'lng':139.780008,'dep':-15.3},
    {'id':'T12','sta':'門前仲町駅','lat':35.671851,'lng':139.796214,'dep':-11.4},
    {'id':'T13','sta':'木場駅','lat':35.669354,'lng':139.807039,'dep':-22.4},
    {'id':'T14','sta':'東陽町駅','lat':35.669626,'lng':139.817601,'dep':-10.9},
    {'id':'T15','sta':'南砂町駅','lat':35.668796,'lng':139.830653,'dep':-6.2},
    {'id':'T16','sta':'西葛西駅','lat':35.664531,'lng':139.859369,'dep':10},
    {'id':'T17','sta':'葛西駅','lat':35.663525,'lng':139.872691,'dep':9},
    {'id':'T18','sta':'浦安駅','lat':35.665745,'lng':139.892939,'dep':8.6},
    {'id':'T19','sta':'南行徳駅','lat':35.672687,'lng':139.902314,'dep':7.7},
    {'id':'T20','sta':'行徳駅','lat':35.682562,'lng':139.914233,'dep':7.4},
    {'id':'T21','sta':'妙典駅','lat':35.691618,'lng':139.925035,'dep':7.4},
    {'id':'T22','sta':'原木中山駅','lat':35.703202,'lng':139.941879,'dep':6.7},
    {'id':'T23','sta':'西船橋駅','lat':35.707456,'lng':139.959099,'dep':0.9}
  ]}
  ];

  var container;
  var camera, scene,renderer;
  var mesh, geometry, sphereMaterial, sphere, lineMaterial, line;
  var mouseX = 0; mouseY = 0;
  var windowHalfX = window.innerWidth / 2 ;
  var windowHalfY = window.innerHeight / 2 ;
  document.addEventListener( 'mousemove', onDocumentMouseMove, false );

  init();
  animate();

  function init(){
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(80, window.innerWidth/window.innerHeight, 1, 1000);
    camera.position.z = 100;
    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0xffffff);

    var preX, preY, preZ, curX, curY, curZ;
    //緯度基準
    var baseLat = 35.70;
    //経度基準
    var baseLng = 139.80;

    for(var i in subwayData){
      lineMaterial = new THREE.LineBasicMaterial({color: subwayData[i].color,   opacity: 1.0});
      for (var j in subwayData[i].data){
        sphere = new THREE.Mesh(new THREE.SphereGeometry(2,5,5), new THREE.MeshBasicMaterial( { color: subwayData[i].color}));
        sphere.overdraw = true;

        preX = curX;
        preY = curY;
        preZ = curZ;

        //経度
        curX = (subwayData[i].data[j].lng - baseLng) * 1000;
        //緯度
        curY = (subwayData[i].data[j].lat - baseLat) * 1000;
        //深さ
        curZ = subwayData[i].data[j].dep * 1.5;
        //始点
        if(j == 0){
          preX = curX;
          preY = curY;
          preZ = curZ;
        }

        //球体
        sphere.position.x = curX;
        sphere.position.y = curY;
        sphere.position.z = curZ;
        scene.add(sphere);

        //直線
        geometry = new THREE.Geometry();
        geometry.vertices.push(new THREE.Vector3(curX, curY, curZ));
        geometry.vertices.push(new THREE.Vector3(preX, preY, preZ));
        line = new THREE.Line(geometry, lineMaterial);
        scene.add(line);

      }
    }
    
    //　canvasへ追加
    div_canvas = document.getElementById('div_canvas');
    div_canvas.appendChild(renderer.domElement);
  }

  function onDocumentMouseMove(event){
    mouseX = (event.clientX - windowHalfX) * 10;
    mouseY = (event.clientY - windowHalfY) * 10;
  }

  function animate(){
    requestAnimationFrame(animate);
    render();
  }

  function render(){
    camera.position.x = (mouseX - camera.position.x) * 0.05;
    camera.position.y = ( - mouseY - camera.position.y) * 0.05;
    camera.lookAt(scene.position);
    renderer.render(scene, camera);
  }
  </script>
</body>
</html>
